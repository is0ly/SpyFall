<html>
	<body>
		<p>
			<button>Декодировать</button>
		</p>
		<canvas id="source" width="600" height="400"></canvas>
		<canvas id="message" width="600" height="400"></canvas>
		<canvas id="solver" width="600" height="400"></canvas>

		<script src="./data.js"></script>
		<script src="./functions.js"></script>
		<script>
			const width = 6;
			const height = 4;
			const key = getEncryptionKey();
			console.log("Ключ шифрования", key);

			document.querySelector("button").addEventListener("click", () => {
				let pixelRArray = [];
				let pixelGArray = [];
				let pixelBArray = [];
				let secretPixel;
				for (let x = 0; x < width; x++) {
					for (let y = 0; y < height; y++) {
						// console.log("x", x);
						// console.log("y", y);
						// Получение пикселя оригинального сообщения
						const originalPixel = getOriginalPixelColor(x, y);
						// Получение пикселя зашифрованного сообщения
						const secretPixel = getMessagePixelColor(x, y);

						let pixelr = secretPixel.r - originalPixel.r;
						let pixelg = secretPixel.g - originalPixel.g;
						let pixelb = secretPixel.b - originalPixel.b;

						pixelRArray.push(pixelr);
						pixelGArray.push(pixelg);
						pixelBArray.push(pixelb);

						// ABC'.charCodeAt(0)

						let binary = (364).toString(2);
						let digit = parseInt(binary, 2);
						console.log(digit);

						putPixelToSolution(originalPixel, x, y);
					}
				}
				console.log("R", pixelRArray);
				console.log("G", pixelGArray);
				console.log("B", pixelBArray);
			});
		</script>
	</body>
</html>
